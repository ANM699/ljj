(this.webpackJsonpljj=this.webpackJsonpljj||[]).push([[0],{325:function(e,t){},327:function(e,t){},349:function(e,t,n){},350:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n(16),a=n.n(r),s=n(2);n(82);var o=n(36),i=n.n(o),j=(n(62),n(26)),l=n.n(j),u=(n(126),n(8)),p=n.n(u),d=(n(206),n(13)),b=n.n(d),m=n(10),O=(n(217),n(144)),h=n.n(O),x=(n(130),n(74)),_=n.n(x),f=(n(63),n(28)),v=n.n(f),y=n(354),I=n(153),g=(n(135),n(77)),w=n.n(g),S=(n(314),n(149)),k=n.n(S);function N(e){var t=e.children,n=e.navBar,c=e.header;return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(k.a,{mode:"dark",children:n}),c?Object(s.jsx)("div",{className:"title",children:c}):null,Object(s.jsxs)(w.a,{children:[Object(s.jsx)(l.a,{}),t]})]})}var P=n(17),B=n.n(P),C=n(29),J=null,F=function(){var e=Object(C.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e,t){var n=window.indexedDB.open("ljjDB");n.onupgradeneeded=function(e){var t=e.target.result;t.objectStoreNames.contains("projects")||t.createObjectStore("projects",{autoIncrement:!0}),t.objectStoreNames.contains("columns")||t.createObjectStore("columns",{autoIncrement:!0}).createIndex("projectId","projectId",{unique:!1})},n.onsuccess=function(t){J=t.target.result,e(J)},n.onerror=function(){t(),console.error("\u6570\u636e\u5e93\u521d\u59cb\u5316\u5931\u8d25\uff01")}}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),L=function(){var e=Object(C.a)(B.a.mark((function e(t,n){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F();case 2:return e.next=4,new Promise((function(e,c){var r=J.transaction([t],"readwrite").objectStore(t).add(n);r.onsuccess=function(t){var n=t.target.result;e(n),J.close()},r.onerror=function(){c(),console.error("".concat(t,"\u6570\u636e\u6dfb\u52a0\u5931\u8d25\uff01"))}}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),R=function(){var e=Object(C.a)(B.a.mark((function e(t){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F();case 2:return e.next=4,new Promise((function(e,n){var c=[],r=J.transaction(t,"readonly").objectStore(t).openCursor();r.onsuccess=function(t){var n=t.target.result;if(n){var r=Object(m.a)({id:n.primaryKey},n.value);c.push(r),n.continue()}else e(c),J.close()},r.onerror=function(){n(),console.error("".concat(t,"\u6570\u636e\u67e5\u8be2\u5931\u8d25\uff01"))}}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),q=function(){var e=Object(C.a)(B.a.mark((function e(t,n,c){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F();case 2:return e.next=4,new Promise((function(e,r){var a=[],s=IDBKeyRange.only(c),o=J.transaction(t,"readonly").objectStore(t).index(n).openCursor(s);o.onsuccess=function(t){var n=t.target.result;if(n){var c=Object(m.a)({id:n.primaryKey},n.value);a.push(c),n.continue()}else e(a),J.close()},o.onerror=function(){r(),console.error("".concat(t,"\u6570\u636e\u67e5\u8be2\u5931\u8d25\uff01"))}}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t,n,c){return e.apply(this,arguments)}}(),D=v.a.Item;var E=Object(I.a)()((function(e){var t=e.form,n=e.history,c=JSON.parse(sessionStorage.getItem("curProject")),r=JSON.parse(sessionStorage.getItem("curTemplate")),a=t.getFieldProps,o=t.getFieldError;return Object(s.jsxs)(N,{navBar:c.name,header:r.name,children:[Object(s.jsxs)(v.a,{children:[Object(s.jsx)(h.a,Object(m.a)(Object(m.a)({mode:"date",title:"\u9009\u62e9\u65e5\u671f"},a("date",{initialValue:new Date})),{},{children:Object(s.jsx)(D,{children:"\u68c0\u6d4b\u65f6\u95f4"})})),Object(s.jsx)(b.a,Object(m.a)(Object(m.a)({labelNumber:7,error:!!o("equip")},a("equip",{rules:[{required:!0,message:"\u5fc5\u586b"}]})),{},{children:"\u68c0\u6d4b\u8bbe\u5907\u53ca\u540d\u79f0"})),Object(s.jsx)(b.a,Object(m.a)(Object(m.a)({error:!!o("position")},a("position",{rules:[{required:!0,message:"\u5fc5\u586b"}]})),{},{children:"\u67f1\u4f4d\u7f6e"}))]}),Object(s.jsx)("div",{className:"sub-title",children:"\u622a\u9762\u5c3a\u5bf8\uff08mm\uff09"}),Object(s.jsxs)(p.a,{children:[Object(s.jsx)(p.a.Item,{children:Object(s.jsx)(b.a,Object(m.a)({placeholder:"\u5b9e\u6d4b\u503c"},a("section_s_m_1")))}),Object(s.jsx)(p.a.Item,{children:Object(s.jsx)(b.a,Object(m.a)({placeholder:"\u5b9e\u6d4b\u503c"},a("section_s_m_2")))}),Object(s.jsx)(p.a.Item,{children:Object(s.jsx)(b.a,Object(m.a)({placeholder:"\u5b9e\u6d4b\u503c"},a("section_s_m_3")))})]}),Object(s.jsx)("div",{className:"sub-title",children:"\u67f1\u7eb5\u7b4b\u5b9e\u6d4b\u5206\u5e03\uff08mm\uff09"}),Object(s.jsxs)(p.a,{children:[Object(s.jsx)(p.a.Item,{children:Object(s.jsx)(b.a,Object(m.a)({placeholder:"\u67f1\u7eb5\u7b4b\u5b9e\u6d4b\u5206\u5e03"},a("bar")))}),Object(s.jsx)(p.a.Item,{})]}),Object(s.jsx)("div",{className:"sub-title",children:"\u52a0\u5bc6\u533a\u7b8d\u7b4b\u95f4\u8ddd\uff08mm\uff09"}),Object(s.jsxs)(p.a,{children:[Object(s.jsx)(p.a.Item,{children:Object(s.jsx)(b.a,Object(m.a)({type:"number",placeholder:"\u5b9e\u6d4b\u503c"},a("space_m_1")))}),Object(s.jsx)(p.a.Item,{children:Object(s.jsx)(b.a,Object(m.a)({type:"number",placeholder:"\u5b9e\u6d4b\u503c"},a("space_m_2")))}),Object(s.jsx)(p.a.Item,{children:Object(s.jsx)(b.a,Object(m.a)({type:"number",placeholder:"\u5b9e\u6d4b\u503c"},a("space_m_3")))})]}),Object(s.jsx)(l.a,{}),Object(s.jsxs)(p.a,{children:[Object(s.jsx)(p.a.Item,{children:Object(s.jsx)(b.a,Object(m.a)({type:"number",placeholder:"\u5b9e\u6d4b\u503c"},a("space_m_4")))}),Object(s.jsx)(p.a.Item,{children:Object(s.jsx)(b.a,Object(m.a)({type:"number",placeholder:"\u5b9e\u6d4b\u503c"},a("space_m_5")))}),Object(s.jsx)(p.a.Item,{children:Object(s.jsx)(b.a,Object(m.a)({type:"number",placeholder:"\u5b9e\u6d4b\u503c"},a("space_m_6")))})]}),Object(s.jsx)("div",{className:"sub-title",children:"\u975e\u52a0\u5bc6\u533a\u5b9e\u6d4b\u7b8d\u7b4b\u95f4\u8ddd\uff08mm\uff09"}),Object(s.jsxs)(p.a,{children:[Object(s.jsx)(p.a.Item,{children:Object(s.jsx)(b.a,Object(m.a)({type:"number",placeholder:"\u5b9e\u6d4b\u503c"},a("space_non_m_1")))}),Object(s.jsx)(p.a.Item,{children:Object(s.jsx)(b.a,Object(m.a)({type:"number",placeholder:"\u5b9e\u6d4b\u503c"},a("space_non_m_2")))}),Object(s.jsx)(p.a.Item,{children:Object(s.jsx)(b.a,Object(m.a)({type:"number",placeholder:"\u5b9e\u6d4b\u503c"},a("space_non_m_3")))})]}),Object(s.jsx)(l.a,{}),Object(s.jsxs)(p.a,{children:[Object(s.jsx)(p.a.Item,{children:Object(s.jsx)(b.a,Object(m.a)({type:"number",placeholder:"\u5b9e\u6d4b\u503c"},a("space_non_m_4")))}),Object(s.jsx)(p.a.Item,{children:Object(s.jsx)(b.a,Object(m.a)({type:"number",placeholder:"\u5b9e\u6d4b\u503c"},a("space_non_m_5")))}),Object(s.jsx)(p.a.Item,{children:Object(s.jsx)(b.a,Object(m.a)({type:"number",placeholder:"\u5b9e\u6d4b\u503c"},a("space_non_m_6")))})]}),Object(s.jsxs)(p.a,{children:[Object(s.jsxs)(p.a.Item,{children:[Object(s.jsx)("div",{className:"sub-title",children:"\u8bbe\u8ba1\u7b8d\u7b4b\u95f4\u8ddd\uff08mm\uff09"}),Object(s.jsx)(b.a,Object(m.a)({type:"number",placeholder:"\u8bbe\u8ba1\u7b8d\u7b4b\u95f4\u8ddd"},a("space_d")))]}),Object(s.jsxs)(p.a.Item,{children:[Object(s.jsx)("div",{className:"sub-title",children:"\u52a0\u5bc6\u533a\u957f\u5ea6\uff08mm\uff09"}),Object(s.jsx)(b.a,Object(m.a)({type:"number",placeholder:"\u52a0\u5bc6\u533a\u957f\u5ea6"},a("length")))]})]}),Object(s.jsx)(l.a,{}),Object(s.jsx)(i.a,{type:"primary",onClick:function(){t.validateFields({force:!0},(function(e){if(e)_.a.fail("\u5fc5\u586b\u9879\u672a\u586b\u5199\uff01",2);else{var a=t.getFieldsValue();a.date=Object(y.a)(a.date,"yyyy-MM-dd"),a.projectId=c.id,a.templateId=r.id,a.section_s_a="";var s=function(e,t){return parseInt(e)+parseInt(t)},o=[];a.space_m_1&&o.push(a.space_m_1),a.space_m_2&&o.push(a.space_m_2),a.space_m_3&&o.push(a.space_m_3),a.space_m_4&&o.push(a.space_m_4),a.space_m_5&&o.push(a.space_m_5),a.space_m_6&&o.push(a.space_m_6),a.space_m=o.length?o.join(","):"",a.space_a=o.length?o.reduce(s)/o.length:"";var i=[];a.space_non_m_1&&i.push(a.space_non_m_1),a.space_non_m_2&&i.push(a.space_non_m_2),a.space_non_m_3&&i.push(a.space_non_m_3),a.space_non_m_4&&i.push(a.space_non_m_4),a.space_non_m_5&&i.push(a.space_non_m_5),a.space_non_m_6&&i.push(a.space_non_m_6),a.space_non_m=i.length?i.join(","):"",a.space_non_a=i.length?i.reduce(s)/i.length:"",L("columns",a).then((function(){n.replace("/record/list")}))}}))},children:"\u4fdd\u5b58"})]})})),T=n(79),U=n(150),A=n.n(U),K=n(151),M=n.n(K);function V(){return(V=Object(C.a)(B.a.mark((function e(t){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(t),M.a.getBinaryContent("./templates/F-05.docx",function(){var e=Object(C.a)(B.a.mark((function e(n,c){var r;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=2;break}throw n;case 2:return e.next=4,A()({template:c,data:t,cmdDelimiter:["{","}"]});case 4:r=e.sent,z(r,"report.docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document");case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var z=function(e,t,n){var c=new Blob([e],{type:n}),r=window.URL.createObjectURL(c);G(r,t,n),setTimeout((function(){window.URL.revokeObjectURL(r)}),1e3)},G=function(e,t){var n=document.createElement("a");n.href=e,n.download=t,document.body.appendChild(n),n.style="display: none",n.click(),n.remove()},H=v.a.Item;n(339);var Q=n(110),W=n.n(Q),X=n(154),Y=(n(341),n(152)),Z=n.n(Y),$=n(12),ee=v.a.Item,te=[{id:1,name:"\u94a2\u7b4b\u6df7\u51dd\u571f\u67f1\u68c0\u6d4b\u8bb0\u5f55",enable:!0},{id:2,name:"\u94a2\u7b4b\u6df7\u51dd\u571f\u6881\u68c0\u6d4b\u8bb0\u5f55",enable:!1},{id:3,name:"\u5899\u94a2\u7b4b\u53ca\u539a\u5ea6\u68c0\u6d4b\u8bb0\u5f55",enable:!1},{id:4,name:"\u677f\u94a2\u7b4b\u53ca\u539a\u5ea6\u68c0\u6d4b\u8bb0\u5f55",enable:!1}];var ne=Object($.f)((function(e){var t=e.project,n=e.history;return Object(s.jsx)(w.a,{children:Object(s.jsx)(v.a,{children:te.map((function(e){return Object(s.jsx)(ee,{disabled:!e.enable,extra:e.enable?"":"\u4e0d\u53ef\u7528",onClick:function(){!function(e){e.enable&&(sessionStorage.setItem("curProject",JSON.stringify(t)),sessionStorage.setItem("curTemplate",JSON.stringify(e)),n.push("/record/List"))}(e)},children:e.name},e.id)}))})})})),ce=Z.a.prompt;var re=n(109);n(349);a.a.render(Object(s.jsx)(re.a,{children:Object(s.jsxs)($.c,{children:[Object(s.jsx)($.a,{path:"/record/Add",component:E}),Object(s.jsx)($.a,{path:"/record/List",component:function(e){var t=e.history,n=JSON.parse(sessionStorage.getItem("curProject")),r=JSON.parse(sessionStorage.getItem("curTemplate")),a=Object(c.useState)([]),o=Object(T.a)(a,2),j=o[0],u=o[1];return Object(c.useEffect)((function(){q("columns","projectId",n.id).then((function(e){u(e)}))}),[n.id]),Object(s.jsxs)(N,{navBar:n.name,header:r.name,children:[Object(s.jsx)(v.a,{children:j.map((function(e){return Object(s.jsx)(H,{extra:e.date,children:e.position},e.id)}))}),Object(s.jsx)(l.a,{}),Object(s.jsxs)(p.a,{children:[Object(s.jsx)(p.a.Item,{children:Object(s.jsx)(i.a,{type:"primary",onClick:function(){t.push("/record/add")},children:"\u6dfb\u52a0\u8bb0\u5f55"})}),Object(s.jsx)(p.a.Item,{children:Object(s.jsx)(i.a,{type:"default",onClick:function(){if(j.length){var e=j.concat(new Array(4-j.length).fill({}));console.log(e),function(e){V.apply(this,arguments)}({columns:e})}else _.a.fail("\u6ca1\u6709\u8981\u5bfc\u51fa\u7684\u8bb0\u5f55\uff01",2)},children:"\u5bfc\u51fa"})})]})]})}}),Object(s.jsx)($.a,{path:"/record",component:function(){return Object(s.jsx)("div",{children:"Record"})}}),Object(s.jsx)($.a,{component:function(){var e=Object(c.useState)([]),t=Object(T.a)(e,2),n=t[0],r=t[1];return Object(c.useEffect)((function(){R("projects").then((function(e){r(e)}))}),[]),Object(s.jsxs)(N,{navBar:"\u9879\u76ee\u5217\u8868",children:[Object(s.jsx)(W.a,{accordion:!0,openAnimation:{},children:n.map((function(e){return Object(s.jsx)(W.a.Panel,{header:e.name,children:Object(s.jsx)(ne,{project:e})},e.id)}))}),Object(s.jsx)(l.a,{}),Object(s.jsx)(i.a,{type:"primary",onClick:function(){ce("\u9879\u76ee\u540d\u79f0",null,[{text:"\u53d6\u6d88"},{text:"\u786e\u5b9a",onPress:function(e){return e?L("projects",{name:e}).then((function(t){var c=[].concat(Object(X.a)(n),[{id:t,name:e}]);r(c)})):Promise.reject()}}],"default",null,["\u8bf7\u8f93\u5165\u9879\u76ee\u540d\u79f0"])},children:"\u521b\u5efa\u65b0\u9879\u76ee"})]})}})]})}),document.getElementById("root"))}},[[350,1,2]]]);
//# sourceMappingURL=main.690c18f9.chunk.js.map