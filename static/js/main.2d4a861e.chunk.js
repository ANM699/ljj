(this.webpackJsonpljj=this.webpackJsonpljj||[]).push([[0],{314:function(e,t){},316:function(e,t){},341:function(e,t,r){},342:function(e,t,r){"use strict";r.r(t);var n=r(0),c=r(15),a=r.n(c),o=(r(77),r(42)),s=r.n(o),i=(r(120),r(71)),u=r.n(i),j=(r(198),r(136)),l=r.n(j),d=(r(217),r(30)),b=r.n(d),p=(r(91),r(34)),m=r.n(p),f=r(10),O=(r(61),r(28)),x=r.n(O),h=r(345),v=r(146),y=r(16),w=r.n(y),g=r(29),k=r(142),V=r.n(k),q=r(143),D=r.n(q);function N(){return(N=Object(g.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:D.a.getBinaryContent("./templates/F-05.docx",function(){var e=Object(g.a)(w.a.mark((function e(r,n){var c;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=2;break}throw r;case 2:return e.next=4,V()({template:n,data:t,cmdDelimiter:["{","}"]});case 4:c=e.sent,P(c,"report.docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document");case 6:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var P=function(e,t,r){var n=new Blob([e],{type:r}),c=window.URL.createObjectURL(n);C(c,t,r),setTimeout((function(){window.URL.revokeObjectURL(c)}),1e3)},C=function(e,t){var r=document.createElement("a");r.href=e,r.download=t,document.body.appendChild(r),r.style="display: none",r.click(),r.remove()},I=r(3),S=x.a.Item;var B=Object(v.a)()((function(e){var t=e.form,r=t.getFieldProps,n=t.getFieldError;return Object(I.jsxs)(s.a,{children:[Object(I.jsx)(m.a,{}),Object(I.jsxs)(x.a,{style:{backgroundColor:"red"},children:[Object(I.jsx)(b.a,Object(f.a)(Object(f.a)({error:!!n("projectName")},r("projectName",{rules:[{required:!0,message:"\u5fc5\u586b"}]})),{},{children:"\u9879\u76ee\u540d\u79f0"})),Object(I.jsx)(b.a,Object(f.a)(Object(f.a)({error:!!n("equipmentName"),labelNumber:7},r("equipmentName",{rules:[{required:!0,message:"\u5fc5\u586b"}]})),{},{children:"\u68c0\u6d4b\u8bbe\u5907\u53ca\u540d\u79f0"})),Object(I.jsx)(l.a,Object(f.a)(Object(f.a)({mode:"date",title:"\u9009\u62e9\u65e5\u671f"},r("detectDate",{initialValue:new Date,rules:[{required:!0,message:"\u5fc5\u586b"}]})),{},{children:Object(I.jsx)(S,{error:!!n("detectDate"),children:"\u68c0\u6d4b\u65f6\u95f4"})})),Object(I.jsx)(b.a,Object(f.a)(Object(f.a)({error:!!n("reportNo"),type:"number"},r("reportNo",{rules:[{required:!0,message:"\u5fc5\u586b"}]})),{},{children:"\u62a5\u544a\u7f16\u53f7"})),Object(I.jsx)(b.a,Object(f.a)(Object(f.a)({error:!!n("position")},r("position",{rules:[{required:!0,message:"\u5fc5\u586b"}]})),{},{children:"\u67f1\u4f4d\u7f6e"})),Object(I.jsx)(b.a,Object(f.a)(Object(f.a)({error:!!n("mValue1"),type:"number"},r("mValue1",{rules:[{required:!0,message:"\u5fc5\u586b"}]})),{},{children:"\u5b9e\u6d4b\u503c1"})),Object(I.jsx)(b.a,Object(f.a)(Object(f.a)({error:!!n("mValue2"),type:"number"},r("mValue2",{rules:[{required:!0,message:"\u5fc5\u586b"}]})),{},{children:"\u5b9e\u6d4b\u503c2"})),Object(I.jsx)(b.a,Object(f.a)(Object(f.a)({error:!!n("mValue3"),type:"number"},r("mValue3",{rules:[{required:!0,message:"\u5fc5\u586b"}]})),{},{children:"\u5b9e\u6d4b\u503c3"}))]}),Object(I.jsx)(m.a,{}),Object(I.jsx)(u.a,{type:"primary",onClick:function(){t.validateFields({force:!0},(function(e){if(!e){var r=t.getFieldsValue();r.detectDate=Object(h.a)(r.detectDate,"yyyy-MM-dd");var n={position:r.position,section:[r.mValue1,r.mValue2,r.mValue3]},c=Object(f.a)(Object(f.a)({},r),{},{c:n});console.log(c),function(e){N.apply(this,arguments)}(c)}}))},children:"\u5bfc\u51fa"})]})})),F=(r(329),r(106)),E=r.n(F),L=(r(331),r(144)),R=r.n(L),U=r(147),J=r(148),M=(r(333),r(145)),T=r.n(M);function A(e){var t=e.children;return Object(I.jsxs)(s.a,{children:[Object(I.jsx)(m.a,{}),t]})}var z=r(9),G=x.a.Item,H=[{id:1,name:"\u94a2\u7b4b\u6df7\u51dd\u571f\u67f1\u68c0\u6d4b\u8bb0\u5f55",enable:!0},{id:2,name:"\u94a2\u7b4b\u6df7\u51dd\u571f\u6881\u68c0\u6d4b\u8bb0\u5f55",enable:!1},{id:3,name:"\u5899\u94a2\u7b4b\u53ca\u539a\u5ea6\u68c0\u6d4b\u8bb0\u5f55",enable:!1},{id:4,name:"\u677f\u94a2\u7b4b\u53ca\u539a\u5ea6\u68c0\u6d4b\u8bb0\u5f55",enable:!1}];var K=Object(z.f)((function(e){var t=e.project,r=e.history;return Object(I.jsx)(s.a,{children:Object(I.jsx)(x.a,{children:H.map((function(e){return Object(I.jsx)(G,{extra:e.enable?"":"\u4e0d\u53ef\u7528",onClick:function(){!function(e){e.enable&&(sessionStorage.setItem("curProject",t.name),sessionStorage.setItem("curTmeplate",e.name),r.push("/record"))}(e)},children:e.name})}))})})})),Q=null,W=function(){var e=Object(g.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e,t){var r=window.indexedDB.open("ljjDB");r.onupgradeneeded=function(e){var t=e.target.result;t.objectStoreNames.contains("projects")||t.createObjectStore("projects",{autoIncrement:!0})},r.onsuccess=function(t){Q=t.target.result,e(Q)},r.onerror=function(){t(),console.error("\u6570\u636e\u5e93\u521d\u59cb\u5316\u5931\u8d25\uff01")}}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),X=function(){var e=Object(g.a)(w.a.mark((function e(t,r){var n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W();case 2:return n=e.sent,e.next=5,new Promise((function(e,c){var a=n.transaction([t],"readwrite").objectStore(t).add(r);a.onsuccess=function(t){var r=t.target.result;e(r),n.close()},a.onerror=function(){c(),console.error("".concat(t,"\u6570\u636e\u6dfb\u52a0\u5931\u8d25\uff01"))}}));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),Y=function(){var e=Object(g.a)(w.a.mark((function e(t){var r;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W();case 2:return r=e.sent,e.next=5,new Promise((function(e,n){var c=[],a=r.transaction(t,"readonly").objectStore(t).openCursor();a.onsuccess=function(t){var n=t.target.result;if(n){var a=Object(f.a)({id:n.key},n.value);c.push(a),n.continue()}else e(c),r.close()},a.onerror=function(){n(),console.error("".concat(t,"\u6570\u636e\u67e5\u8be2\u5931\u8d25\uff01"))}}));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Z=(x.a.Item.Brief,T.a.prompt);var $=r(105);r(341);a.a.render(Object(I.jsx)($.a,{children:Object(I.jsxs)(z.c,{children:[Object(I.jsx)(z.a,{path:"/record",component:B}),Object(I.jsx)(z.a,{component:function(){var e=Object(n.useState)([]),t=Object(J.a)(e,2),r=t[0],c=t[1];return Object(n.useEffect)((function(){Y("projects").then((function(e){c(e)}))}),[]),Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(R.a,{mode:"dark",children:"\u9879\u76ee\u5217\u8868"}),Object(I.jsxs)(A,{children:[Object(I.jsx)(E.a,{accordion:!0,openAnimation:{},children:r.map((function(e){return Object(I.jsx)(E.a.Panel,{header:e.name,children:Object(I.jsx)(K,{project:e})},e.id)}))}),Object(I.jsx)(m.a,{}),Object(I.jsx)(u.a,{type:"primary",onClick:function(){Z("\u9879\u76ee\u540d\u79f0",null,[{text:"\u53d6\u6d88"},{text:"\u786e\u5b9a",onPress:function(e){return e?X("projects",{name:e}).then((function(t){var n=[].concat(Object(U.a)(r),[{id:t,name:e}]);c(n)})):Promise.reject()}}],"default",null,["\u8bf7\u8f93\u5165\u9879\u76ee\u540d\u79f0"])},children:"\u521b\u5efa\u65b0\u9879\u76ee"})]})]})}})]})}),document.getElementById("root"))}},[[342,1,2]]]);
//# sourceMappingURL=main.2d4a861e.chunk.js.map